<script type="module">
  // 1. 引入谷歌 Gemini SDK（国内可直连）
  import { GoogleGenerativeAI } from "https://esm.sh/@google/generative-ai";

  // 2. 用你的 Gemini Key（免费申请，步骤见下方）
  const API_KEY = "AIzaSyCQArQERu9Nk-E9hnKxOB6F3B285eJu9OI";
  const genAI = new GoogleGenerativeAI(API_KEY);
  const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash-latest" });

  // 3. 示例：先写死一篇中文新闻（下一步再自动抓）
  const news = "7月14日，巴黎奥运会开幕式进入最后一周倒计时，法国警方加强安保措施，确保约30万观众安全。";

  // 4. 调用 AI 改写英文
  async function run() {
    const prompt_en = `将下面中文新闻改写成英文，300±20字：\n${news}`;
    const result_en = await model.generateContent(prompt_en);
    document.getElementById("en").innerText = result_en.response.text();

    // 5. 调用 AI 翻译日法德
    const prompt_ja = `翻译成日语：\n${news}`;
    const prompt_fr = `翻译成法语：\n${news}`;
    const prompt_de = `翻译成德语：\n${news}`;

    document.getElementById("ja").innerText = (await model.generateContent(prompt_ja)).response.text();
    document.getElementById("fr").innerText = (await model.generateContent(prompt_fr)).response.text();
    document.getElementById("de").innerText = (await model.generateContent(prompt_de)).response.text();

    // 6. 原文显示
    document.getElementById("origin").innerText = news;
  }

  run();
</script>
