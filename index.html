<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>æ¯æ—¥å¤šè¯­è¨€æ–°é—»</title>
    <style>
        body {font-family: "PingFang SC", sans-serif; margin: 20px; line-height: 1.6;}
        h1 {font-size: 24px;}
        .section {margin-bottom: 30px;}
    </style>
</head>
<body>
    <h1>ä»Šæ—¥æ–°é—»ï¼ˆç¤ºä¾‹ï¼‰</h1>

    <div class="section">
        <h2>ä¸­æ–‡åŸæ–‡</h2>
        <p id="origin">æ­£åœ¨åŠ è½½â€¦â€¦</p>
    </div>

    <div class="section">
        <h2>è‹±è¯­æ”¹å†™ï¼ˆ300Â±20 å­—ï¼‰</h2>
        <p id="en">æ­£åœ¨åŠ è½½â€¦â€¦</p>
    </div>

    <div class="section">
        <h2>æ—¥è¯­ / æ³•è¯­ / å¾·è¯­ç¿»è¯‘</h2>
        <p id="ja">æ­£åœ¨åŠ è½½â€¦â€¦</p>
        <p id="fr">æ­£åœ¨åŠ è½½â€¦â€¦</p>
        <p id="de">æ­£åœ¨åŠ è½½â€¦â€¦</p>
    </div>

    <script type="module">
import { GoogleGenerativeAI } from "https://esm.sh/@google/generative-ai";
const API_KEY = "ä½ çš„å¯†é’¥";
const genAI = new GoogleGenerativeAI(API_KEY);
const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash-latest" });

const news = "7æœˆ14æ—¥ï¼Œå·´é»å¥¥è¿ä¼šå¼€å¹•å¼è¿›å…¥æœ€åä¸€å‘¨å€’è®¡æ—¶ï¼Œæ³•å›½è­¦æ–¹åŠ å¼ºå®‰ä¿æªæ–½ï¼Œç¡®ä¿çº¦30ä¸‡è§‚ä¼—å®‰å…¨ã€‚";

async function run() {
  // 1) åŸæ–‡ & æ”¹å†™
  const prompt_en = `å°†ä¸‹é¢ä¸­æ–‡æ–°é—»æ”¹å†™æˆè‹±æ–‡ï¼Œ300Â±20å­—ï¼š\n${news}`;
  document.getElementById("origin").innerText = news;
  document.getElementById("en").innerText   = (await model.generateContent(prompt_en)).response.text();

  // 2) ä¸‰è¯­ç¿»è¯‘
  const [ja, fr, de] = await Promise.all([
    model.generateContent(`ç¿»è¯‘æˆæ—¥è¯­ï¼š\n${news}`),
    model.generateContent(`ç¿»è¯‘æˆæ³•è¯­ï¼š\n${news}`),
    model.generateContent(`ç¿»è¯‘æˆå¾·è¯­ï¼š\n${news}`)
  ]);
  document.getElementById("ja").innerText = ja.response.text();
  document.getElementById("fr").innerText = fr.response.text();
  document.getElementById("de").innerText = de.response.text();

  // 3) 5 ä¸ªå…³é”®è¯æ±‡å¡ç‰‡
  const prompt_vocab = `
ä»ä¸Šé¢è‹±æ–‡æ”¹å†™ä¸­ï¼ŒæŒ‘å‡º 5 ä¸ªå¯¹æ—¥è¯­/æ³•è¯­/å¾·è¯­åˆå­¦è€…æ¥è¯´è¾ƒéš¾çš„æ ¸å¿ƒè¯æ±‡ã€‚
ä¸ºæ¯ä¸ªè¯ç»™å‡ºï¼š
- åŸè¯
- éŸ³æ ‡ï¼ˆè‹±å¼ IPAï¼‰
- è‹±/æ—¥/æ³•/å¾· å››ç§è¯­è¨€é‡Šä¹‰
- 1 å¥ç®€çŸ­ä¾‹å¥
è¾“å‡ºæ ¼å¼ï¼šæ¯è¯å ä¸€è¡Œï¼Œç”¨ | åˆ†éš”å­—æ®µ
`;
  const vocabRaw = (await model.generateContent(prompt_vocab)).response.text();
  const vocabLines = vocabRaw.trim().split('\n');
  let html = '';
  vocabLines.forEach(line => {
    const [word, ipa, ...rest] = line.split('|');
    html += `<div style="border:1px solid #ddd;margin:6px 0;padding:8px;">
      <strong>${word}</strong> ${ipa}<br>
      ${rest.join(' / ')}
    </div>`;
  });
  document.getElementById("vocab").innerHTML = html;

  // 4) è¿·ä½ è¯­æ³•ç‚¹ï¼ˆå„ 1 å¥ï¼‰
  const grammarPrompt = (lang) => `ç”¨ä¸­æ–‡è§£é‡Šä¸‹é¢è‹±æ–‡å¥å­ä¸­ï¼Œä¸€å¥æœ€ç®€å•çš„${lang}è¯­æ³•ç°è±¡ï¼š\n${document.getElementById("en").innerText}`;
  document.getElementById("grammar-ja").innerText = (await model.generateContent(grammarPrompt("æ—¥è¯­"))).response.text();
  document.getElementById("grammar-fr").innerText = (await model.generateContent(grammarPrompt("æ³•è¯­"))).response.text();
  document.getElementById("grammar-de").innerText = (await model.generateContent(grammarPrompt("å¾·è¯­"))).response.text();
}

window.addEventListener('DOMContentLoaded', run);
</script>
    <!-- ===== Vocabulary Cards ===== -->
<div class="section">
  <h2>ğŸ”‘ 5 Key Words</h2>
  <div id="vocab"></div>
</div>

<!-- ===== Grammar Spotlight ===== -->
<div class="section">
  <h2>ğŸ“š Mini Grammar</h2>
  <p><strong>Japanese:</strong> <span id="grammar-ja"></span></p>
  <p><strong>French:</strong> <span id="grammar-fr"></span></p>
  <p><strong>German:</strong> <span id="grammar-de"></span></p>
</div>
</body>
</html>
